## Етапи компіляції С-програм та автоматизація побудови С-програм

### 2.1 Побудова програми з’єднання з СКБД PostgreSQL на основі монолітної С-програми

![image](https://github.com/OS-IS/ai233-titoraga/assets/162619587/90724d71-4b4f-4ba9-b6c0-dde1c606ac6e)

Рис. 1 - 2.1.1 Встановити в ОС Linux програмний пакунок libpq-dev.

![image](https://github.com/OS-IS/ai233-titoraga/assets/162619587/c23bdc0d-a9f5-4c90-8444-59cd7080a5d1)

Рис. 2 - 2.1.2 Підключитись до ОС від імені користувача postgres, який є адміністратором
СКБД PostgreSQL та для якого не буде вимагатися пароль під час підключення до БД.

![image](https://github.com/OS-IS/ai233-titoraga/assets/162619587/9a21525a-2deb-472d-86dd-68cc79d56dab)

Рис. 3 - 2.1.3 Створити C-програму з назвою «db_connect.c», яка:
- встановлює з`єднання із СКБД PostgreSQL;
- під час з’єднання використовує назву БД з попередньої лабораторної роботи та
ім’я користувача postgres СКБД PostgreSQL, які вбудовані у програмний код;
- обробляє результат з’єднання (успішне та помилкове), виводячи на екран
відповідні повідомлення, які враховують назву БД;
- увесь програмний код розміщується лише у функції main.

![image](https://github.com/OS-IS/ai233-titoraga/assets/162619587/bcdc80ef-9040-4ece-bf85-da7e49e4b12e)

Рис. 4 - 2.1.4 Скомпілювати С-програму, враховуючи каталоги з header-файлами та
бібліотеками СКБД PostgreSQL.
Перевірити роботу executable-файла.

![image](https://github.com/OS-IS/ai233-titoraga/assets/162619587/c50bb351-53b0-4a60-ac85-02b2284fd4bc)

Рис. 5 - 2.1.5 Створити C-програму з назвою «db_connect_param.c», яка повторює всі дії C-
програми з назвою «db_connect.c», але назву бази даних та ім’я користувача програма
повинна брати як параметри командного рядку.

![image](https://github.com/OS-IS/ai233-titoraga/assets/162619587/dfe278df-49e9-4cf1-bb97-9fe3e6a82609)

Рис 6 - 2.1.6 Скомпілювати С-програму, враховуючи каталоги з header-файлами та
бібліотеками СКБД PostgreSQL.
Перевірити роботу executable-файла за двома варіантами назви БД: правильна назва
БД та будь-яка неправильна назва БД.

### 2.2 Побудова програми з’єднання з СКБД PostgreSQL за модульним принципом програмування

![image](https://github.com/OS-IS/ai233-titoraga/assets/162619587/17113642-0296-4d58-8b69-c56154cbcf22)

![image](https://github.com/OS-IS/ai233-titoraga/assets/162619587/3eae8e70-e85f-4210-9fe0-eae4b29f156c)

![image](https://github.com/OS-IS/ai233-titoraga/assets/162619587/b9b1e5da-f648-4614-8b9c-63dbd0588e91)

Рис. 7 - 2.2.1 Змінити код С-програми, враховуючи модульний принцип програмування:
- створити С-файл з назвою «connect_назва таблиці.c», який містить програмний
код з’єднання із СКБД PostgreSQL у вигляді функції з назвою «connect_назва таблиці», де
«назва таблиці» - назва реляційної таблиці з попередньої лабораторної работи;
- створити header-файл за шаблоном «назва таблиці.h» та додати до файлу
декларацію створеної функції;
- створити С-файл з назвою «назва таблиці.c», який містить main-функцію з
викликом функції з назвою «connect_назва таблиці».

![image](https://github.com/OS-IS/ai233-titoraga/assets/162619587/2600a06f-a995-4fdc-b45f-d49adca55a02)

Рис. 8 - 2.2.2 Побудувати executable-файл через кроки:
- створити object-файл з назвою «connect_назва таблиці.o» для «connect_назва
таблиці.c», враховуючи каталоги з header-файлами, бібліотеками СКБД PostgreSQL
- створити object-файл з назвою «назва таблиці.o» для файлу «назва таблиці.c»,
враховуючи каталоги з header-файлами, бібліотеками СКБД PostgreSQL
- створити executable-файл з назвою «назва таблиці», враховуючи каталоги з
header-файлами, бібліотеками СКБД PostgreSQL, а також створені object-файли з назвою
«connect_назва таблиці.o» та «назва таблиці.o».
Перевірити роботу executable-файла.

### 2.3 Побудова програми з’єднання з СКБД PostgreSQL через команду make

![image](https://github.com/OS-IS/ai233-titoraga/assets/162619587/3e723dc8-aa6c-43b7-ad85-71f8fca28591)

Рис. 9 - 2.3.1 Створити Makefile, який містить наступний опис мети:
- мета створення object-файлу з назвою «connect_назва таблиці.o»;
- мета створення object-файлу з назвою «назва таблиці.o»;
- мета створення executable-файлу з назвою «назва таблиці».

![image](https://github.com/OS-IS/ai233-titoraga/assets/162619587/87ceb0f2-83ac-4e3d-8944-d26d112ac83b)

Рис. 10 - 2.3.2 Викнати команду make для побудови програми.

### 2.4 Побудова програми додавання рядку реляційної таблиці

![image](https://github.com/OS-IS/ai233-titoraga/assets/162619587/ef8d4495-1477-4388-ba92-a44d53d4fe73)

Рис. 11 - 2.4.1 Створити файл як програмний модуль з назвою «add_назва таблиці.с» із
описом функції додавання рядку реляційної таблиці, яка повинна містити:
- команди транзакції (START TRANSACTION, LOCK TABLE назва таблиці ...,
INSERT INTO назва таблиці ..., COMMIT);
- повідомлення про результат виконання кожної команди.
Команду INSERT INTO створити за прикладом з попередньої лабораторної роботи.

![image](https://github.com/OS-IS/ai233-titoraga/assets/162619587/7be04ce4-cdd0-47a0-9697-7c8c7dcca468)

![image](https://github.com/OS-IS/ai233-titoraga/assets/162619587/704665f6-cb95-4109-a893-b24822ff93ea)

![image](https://github.com/OS-IS/ai233-titoraga/assets/162619587/a0cc1303-72a7-411e-b6ea-32a6909263e9)

Рис. 12 - 2.4.2 Оновити раніше створені файли:
- додати до файлу «назва таблиці.h» декларацію нової функції;
- виконати виклик нової функції із main-фукції файлу «назва таблиці.c»
- додати опис нової мети у файл Makefile

![image](https://github.com/OS-IS/ai233-titoraga/assets/162619587/38ec1b73-a65e-4628-a0a3-4c315ef98f60)

Рис. 13 - 2.4.3 Скомпілювати С-файли програмних модулів командою make.

### 2.5 Побудова програми перегляду рядків реляційної таблиці

![image](https://github.com/OS-IS/ai233-titoraga/assets/162619587/bc3dc6f2-be67-488d-821b-61efa452a784)

Рис. 14 - 2.5.1 Створити файл як програмний модуль з назвою «get_назва таблиці».с із описом
функції перегляду рядків реляційної таблиці, яка повинна містити:
- команди транзакції (START TRANSACTION, LOCK TABLE назва таблиці ...,
SELECT ... FROM назва таблиці ..., COMMIT);
- повідомлення про результат виконання кожної команди.
Команду SELECT ... FROM створити за прикладом з попередньої лабораторної
роботи.

![image](https://github.com/OS-IS/ai233-titoraga/assets/162619587/31cc0fea-4bfb-4ac9-9f84-841dae1b3454)

![image](https://github.com/OS-IS/ai233-titoraga/assets/162619587/4c762858-bbb5-49da-8032-b0071a754c39)

![image](https://github.com/OS-IS/ai233-titoraga/assets/162619587/32690975-36f0-4473-8b6a-a788ac685ca9)

Рис. 15 - 2.5.2 Оновити раніше створені файли:
- додати до файлу «назва таблиці».h декларацію нової функції;
- виконати виклик нової функції із main-фукції файлу «назва таблиці».c
- додати опис нової мети у файл Makefile

![image](https://github.com/OS-IS/ai233-titoraga/assets/162619587/60553680-2895-4abd-87fe-33082e98b161)

Рис. 16 - 2.5.3 Скомпілювати С-файли програмних модулів командою make.
Перевірити роботу executable-файла.

### 2.6 Додаткове налаштування процесу керування файлами через команду make

![image](https://github.com/OS-IS/ai233-titoraga/assets/162619587/96796899-bb8f-4040-9785-281d3de29744)

Рис. 17 - 2.6.1 Додати до файлу Makefile наступні описи мети:
install – копіювання executable-файлу до каталогу bin домашнього каталогу
користувача postgres, наприклад, /var/lib/postgresql/bin/ (попередньо створити такий
каталог);
clean – видалення всіх object-файлів та executable-файлу.

![image_2024-05-28_14-55-51](https://github.com/OS-IS/ai233-titoraga/assets/162619587/9e92c62b-e5ce-46df-b53c-2d01975bf767)

Рис. 18 - 2.6.2 Виконати команду make з метою clean.
Перевірити відсутність всіх object-файлів та executable-файлу.

![image](https://github.com/OS-IS/ai233-titoraga/assets/162619587/4947c1ff-c42a-4748-95d4-2396be3a4d27)

Рис. 19 - 2.6.3 Скомпілювати С-файли програмних модулів командою make.

![image](https://github.com/OS-IS/ai233-titoraga/assets/162619587/8a229621-59af-4448-9ef7-5fc36b0516bf)

Рис. 20 - 2.6.4 Виконати команду make з метою install.
Перевірити наявність executable-файлу у відповідному каталозі.

![image](https://github.com/OS-IS/ai233-titoraga/assets/162619587/39da5cdb-b42d-4740-ac82-9857e3a77b84)

### 2.7 Огляд етапів побудови С-програми GNU-компілятором GCC

![image](https://github.com/OS-IS/ai233-titoraga/assets/162619587/4f8a8d75-b29e-4ea7-83d1-4e29b4081e66)

Рис. 21 - 2.7 Огляд етапів побудови С-програми GNU-компілятором GCC
